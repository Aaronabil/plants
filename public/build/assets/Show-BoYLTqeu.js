import{r as v,j as s,H as C,a as I}from"./app-D8el9p_D.js";import{A as b}from"./AdminLayout-UqOJCja1.js";import{B as w}from"./badge-B7yYAjR2.js";import{B as t}from"./button-C3a5SMX5.js";import{C as i,a as r,b as c,c as p,d as l}from"./card-BcC5XkME.js";import{S as h}from"./separator-CRpGY7cH.js";import{T as _,a as D,b as u,c as n,d as S,e as d}from"./table-DwFRFNKa.js";import{I as P}from"./input-DRdcWRxl.js";import{L as k}from"./label-BAt_E1ba.js";import{A}from"./arrow-left-C8GSVilp.js";import{C as L}from"./credit-card-DvidJyaA.js";import{P as T}from"./package-D6vdkInW.js";import{C as F}from"./circle-check-big-M38yyTm5.js";import"./dropdown-menu-DFGGZxVH.js";import"./index-bGsnAHdf.js";import"./index-DTchHo3b.js";import"./index-CDm79A2h.js";import"./Combination-CgVcbx6e.js";import"./index-o7lZcY_U.js";import"./index-7ay2WHCv.js";import"./index-DChZJ1_8.js";import"./createLucideIcon-Cv3wxvPc.js";import"./utils-DgWKjmuI.js";import"./check-D15Veoj9.js";import"./chevron-right-DV0_q11Z.js";import"./index-DfIaNaEC.js";import"./index-dSc6CJZX.js";import"./x-Dd8M3uyk.js";import"./Logo-_Va2A3aj.js";import"./shopping-cart-DcHvMOaP.js";function os({order:e}){const j=e.payment_status==="PAID",N=e.delivery_status==="PROCESSING",f=e.delivery_status==="SHIPPING",o=e.delivery_status==="COMPLETED",g=e.payment_status==="CANCELLED",[x,y]=v.useState(""),m=a=>{I.visit(route("admin.orders.update-status",e.id),{method:"patch",data:{action:a,resi:a==="process_order"?x:null},preserveScroll:!0})};return s.jsxs(b,{children:[s.jsx(C,{title:`Order ${e.invoice}`}),s.jsxs("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(t,{variant:"outline",size:"icon",onClick:()=>window.history.back(),children:s.jsx(A,{className:"h-4 w-4"})}),s.jsxs("h2",{className:"text-3xl font-bold tracking-tight",children:["Order Details: ",e.invoice]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[s.jsx("div",{className:"col-span-4 space-y-4",children:s.jsxs(i,{children:[s.jsxs(r,{children:[s.jsx(c,{children:"Product List"}),s.jsx(p,{children:"Items purchased in this order."})]}),s.jsxs(l,{children:[s.jsxs(_,{children:[s.jsx(D,{children:s.jsxs(u,{children:[s.jsx(n,{children:"Product"}),s.jsx(n,{className:"text-right",children:"Price"}),s.jsx(n,{className:"text-right",children:"Qty"}),s.jsx(n,{className:"text-right",children:"Subtotal"})]})}),s.jsx(S,{children:e.items.map(a=>s.jsxs(u,{children:[s.jsx(d,{children:a.product?.product_name||"Produk dihapus"}),s.jsx(d,{className:"text-right",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a.price_at_purchase)}),s.jsx(d,{className:"text-right",children:a.quantity}),s.jsx(d,{className:"text-right",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a.price_at_purchase*a.quantity)})]},a.id))})]}),s.jsx(h,{className:"my-4"}),s.jsxs("div",{className:"space-y-1.5 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),s.jsx("span",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e.total_amount-e.shipping_fee)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),s.jsx("span",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e.shipping_fee)})]}),s.jsxs("div",{className:"flex justify-between font-medium text-base",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e.total_amount)})]})]})]})]})}),s.jsxs("div",{className:"col-span-3 space-y-4",children:[s.jsxs(i,{children:[s.jsx(r,{children:s.jsx(c,{children:"Customer Information"})}),s.jsxs(l,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-1",children:[s.jsx("div",{className:"font-medium",children:e.user.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:e.user.email})]}),s.jsx(h,{}),s.jsxs("div",{className:"grid gap-1",children:[s.jsx("div",{className:"font-medium",children:"Shipping Address"}),s.jsx("div",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.shipping_address})]})]})]}),s.jsxs(i,{children:[s.jsxs(r,{children:[s.jsx(c,{children:"Workflow Status"}),s.jsxs(p,{children:["Status right now: ",s.jsxs(w,{children:[e.payment_status," / ",e.delivery_status]})]})]}),s.jsxs(l,{className:"space-y-4",children:[e.payment_status==="AWAITING_PAYMENT"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Awaiting payment. If already transfer manually, click confirm."}),s.jsxs(t,{className:"w-full",onClick:()=>m("accept_payment"),children:[s.jsx(L,{className:"mr-2 h-4 w-4"})," Accept Payment"]})]}),j&&N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(k,{htmlFor:"resi",children:"Resi Number (Optional)"}),s.jsx(P,{id:"resi",placeholder:"Enter resi number...",value:x,onChange:a=>y(a.target.value)})]}),s.jsxs(t,{className:"w-full",onClick:()=>m("process_order"),children:[s.jsx(T,{className:"mr-2 h-4 w-4"})," Process Order & Print Label"]})]}),f&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Order is being shipped. Mark as complete if the item has arrived."}),s.jsxs(t,{className:"w-full",variant:"outline",onClick:()=>m("complete_order"),children:[s.jsx(F,{className:"mr-2 h-4 w-4"})," Mark as Complete"]})]}),(o||g)&&s.jsx("div",{className:"flex items-center justify-center p-4 text-muted-foreground bg-muted/50 rounded-lg",children:o?"Order Completed":"Order Cancelled"})]})]}),s.jsxs(i,{children:[s.jsx(r,{children:s.jsx(c,{children:"Status History"})}),s.jsx(l,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-start gap-4 text-sm",children:s.jsxs("div",{className:"grid gap-1",children:[s.jsx("div",{className:"font-medium",children:"Order Created"}),s.jsx("div",{className:"text-muted-foreground",children:new Date(e.created_at).toLocaleString("id-ID")})]})}),s.jsx("div",{className:"flex items-start gap-4 text-sm",children:s.jsxs("div",{className:"grid gap-1",children:[s.jsx("div",{className:"font-medium",children:"Last Update"}),s.jsx("div",{className:"text-muted-foreground",children:new Date(e.updated_at).toLocaleString("id-ID")})]})})]})})]})]})]})]})]})}export{os as default};
